### *Base de datos*

###### Diagrama entidad-relacion

![diagrama-e/r](https://github.com/MiguelIGP23/DAM1_EQUIPO3_2425/blob/9d2f1e65586f43ddc6aee6a9d86ba78bcf3c2349/equipo3/Bases%20de%20Datos/Imagen-diagrama-entidad-relacion-correcto.PNG)


###### Diagrama Relacional

![diagramarelacional]


###### Script de la base de datos

````
-- MySQL Script generated by MySQL Workbench
-- Tue May  6 12:48:08 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`actividad`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`actividad` (
  `idActividad` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`idActividad`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`usuario` (
  `idUsuario` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(20) NOT NULL,
  `apellido` VARCHAR(25) NOT NULL,
  `email` VARCHAR(30) NOT NULL,
  `password` VARCHAR(32) NOT NULL,
  `rol` ENUM("administrador", "diseñador", "profesor", "alumno") NULL,
  PRIMARY KEY (`idUsuario`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`rutas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`rutas` (
  `idRuta` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(20) NOT NULL,
  `nombre_inicioruta` VARCHAR(45) NOT NULL,
  `nombre_finalruta` VARCHAR(45) NOT NULL,
  `latitudInicial` DOUBLE NOT NULL,
  `latitudFinal` DOUBLE NOT NULL,
  `longitudInicial` DOUBLE NOT NULL,
  `longitudFinal` DOUBLE NOT NULL,
  `distancia` DOUBLE NOT NULL,
  `duracion` TIME NOT NULL,
  `desnivelPositivo` INT NULL,
  `desnivelNegativo` INT NULL,
  `altitudMax` DOUBLE NULL,
  `altitudMin` DOUBLE NULL,
  `clasificacion` ENUM("circular", "lineal") NULL,
  `nivelEsfuerzo` TINYINT NULL,
  `nivelRiesgo` TINYINT NULL,
  `estadoRuta` TINYINT NULL,
  `tipoTerreno` TINYINT NULL,
  `indicaciones` TINYINT NULL,
  `temporadas` SET("invierno", "verano", "otoño", "primavera") NULL,
  `accesibilidad` TINYINT NULL,
  `rutaFamiliar` TINYINT NULL,
  `archivoGPX` TEXT NULL,
  `recomendaciones` TEXT NULL,
  `zonaGeografica` VARCHAR(45) NULL,
  `mediaEstrellas` DOUBLE NULL,
  `actividad_idActividad` INT NOT NULL,
  `usuario_idUsuario` INT NOT NULL,
  PRIMARY KEY (`idRuta`),
  INDEX `fk_rutas_actividad_idx` (`actividad_idActividad` ASC) VISIBLE,
  INDEX `fk_rutas_usuario1_idx` (`usuario_idUsuario` ASC) VISIBLE,
  CONSTRAINT `fk_rutas_actividad`
    FOREIGN KEY (`actividad_idActividad`)
    REFERENCES `mydb`.`actividad` (`idActividad`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_rutas_usuario1`
    FOREIGN KEY (`usuario_idUsuario`)
    REFERENCES `mydb`.`usuario` (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`calendario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`calendario` (
  `idCalendario` INT NOT NULL AUTO_INCREMENT,
  `fecha` DATETIME NOT NULL,
  `detalles` TEXT NULL,
  `recomendaciones` TEXT NULL,
  `rutas_idRuta` INT NOT NULL,
  `usuario_idUsuario` INT NOT NULL,
  PRIMARY KEY (`idCalendario`),
  INDEX `fk_calendario_rutas1_idx` (`rutas_idRuta` ASC) VISIBLE,
  INDEX `fk_calendario_usuario1_idx` (`usuario_idUsuario` ASC) VISIBLE,
  CONSTRAINT `fk_calendario_rutas1`
    FOREIGN KEY (`rutas_idRuta`)
    REFERENCES `mydb`.`rutas` (`idRuta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_calendario_usuario1`
    FOREIGN KEY (`usuario_idUsuario`)
    REFERENCES `mydb`.`usuario` (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`valora`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`valora` (
  `idValora` INT NOT NULL AUTO_INCREMENT,
  `dificultad` TINYINT NOT NULL,
  `fecha` DATE NOT NULL,
  `estrellas` TINYINT NULL,
  `interesCultural` TINYINT NULL,
  `belleza` TINYINT NULL,
  `valoracionTecnica` TEXT NULL,
  `reseña` TEXT NULL,
  `usuario_idUsuario` INT NOT NULL,
  `rutas_idRuta` INT NOT NULL,
  PRIMARY KEY (`idValora`),
  INDEX `fk_valora_usuario1_idx` (`usuario_idUsuario` ASC) VISIBLE,
  INDEX `fk_valora_rutas1_idx` (`rutas_idRuta` ASC) VISIBLE,
  UNIQUE INDEX `conexionunique_paraquelosdosnoseaniguales` (`usuario_idUsuario` ASC, `rutas_idRuta` ASC) VISIBLE,
  CONSTRAINT `fk_valora_usuario1`
    FOREIGN KEY (`usuario_idUsuario`)
    REFERENCES `mydb`.`usuario` (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_valora_rutas1`
    FOREIGN KEY (`rutas_idRuta`)
    REFERENCES `mydb`.`rutas` (`idRuta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`puntosinteres`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`puntosinteres` (
  `idPuntosinteres` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(40) NOT NULL,
  `latitud` DOUBLE NOT NULL,
  `longitud` DOUBLE NOT NULL,
  `caracteristicas` TEXT NULL,
  `tipo` ENUM("histórico-arqueológico", " naturaleza", "mirador", " área de descanso", "punto de agua", "refugio/alojamiento", " cultural", " geológico", "fauna específica", "botánico") NULL,
  `descripcion` TEXT NULL,
  `elevacion` DOUBLE NULL,
  `timestamp` INT NULL,
  `rutas_idRuta` INT NOT NULL,
  PRIMARY KEY (`idPuntosinteres`),
  INDEX `fk_puntosinteres_rutas1_idx` (`rutas_idRuta` ASC) VISIBLE,
  CONSTRAINT `fk_puntosinteres_rutas1`
    FOREIGN KEY (`rutas_idRuta`)
    REFERENCES `mydb`.`rutas` (`idRuta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`puntospeligro`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`puntospeligro` (
  `idPuntosinteres` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(40) NOT NULL,
  `latitud` DOUBLE NOT NULL,
  `longitud` DOUBLE NOT NULL,
  `kilometros` DOUBLE NULL,
  `gravedad` TINYINT NULL,
  `posicion` INT NULL,
  `descripcion` TEXT NULL,
  `elevacion` DOUBLE NULL,
  `timestamp` INT NULL,
  `rutas_idRuta` INT NOT NULL,
  PRIMARY KEY (`idPuntosinteres`),
  INDEX `fk_puntospeligro_rutas1_idx` (`rutas_idRuta` ASC) VISIBLE,
  CONSTRAINT `fk_puntospeligro_rutas1`
    FOREIGN KEY (`rutas_idRuta`)
    REFERENCES `mydb`.`rutas` (`idRuta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`imagenesinteres`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`imagenesinteres` (
  `idimagenesinteres` INT NOT NULL AUTO_INCREMENT,
  `url` TEXT NOT NULL,
  `descripcion` TEXT NULL,
  `puntosinteres_idPuntosinteres` INT NOT NULL,
  PRIMARY KEY (`idimagenesinteres`),
  INDEX `fk_imagenesinteres_puntosinteres1_idx` (`puntosinteres_idPuntosinteres` ASC) VISIBLE,
  CONSTRAINT `fk_imagenesinteres_puntosinteres1`
    FOREIGN KEY (`puntosinteres_idPuntosinteres`)
    REFERENCES `mydb`.`puntosinteres` (`idPuntosinteres`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`imagenespeligro`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`imagenespeligro` (
  `idimagenespeligro` INT NOT NULL AUTO_INCREMENT,
  `url` TEXT NOT NULL,
  `descripcion` TEXT NULL,
  `puntospeligro_idPuntosinteres` INT NOT NULL,
  PRIMARY KEY (`idimagenespeligro`),
  INDEX `fk_imagenespeligro_puntospeligro1_idx` (`puntospeligro_idPuntosinteres` ASC) VISIBLE,
  CONSTRAINT `fk_imagenespeligro_puntospeligro1`
    FOREIGN KEY (`puntospeligro_idPuntosinteres`)
    REFERENCES `mydb`.`puntospeligro` (`idPuntosinteres`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
````
